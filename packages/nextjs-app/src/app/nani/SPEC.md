# Nani!? - 翻訳アプリ仕様

nani.now クローンの翻訳アプリケーション

## ページ構成

### `/nani` (メインページ)

2カラムレイアウト

#### 左サイドバー
- **翻訳履歴リスト**
  - 過去の翻訳結果を新しい順に表示
  - 各項目には翻訳元テキストの冒頭（省略表示）を表示
  - クリックで `/nani/result?id=XXX` に遷移
  - スクロール可能

#### 右メインエリア
- **アプリロゴ・タイトル**
  - "Nani!?" ロゴ
  - "AIが解説付きでバシッと翻訳！" サブタイトル

- **翻訳入力フォーム**
  - 言語選択ドロップダウン
    - 日本語 ⇄ 英語 の切り替え
  - テキストエリア
    - プレースホルダー: "好きな言語で入力..."
    - 複数行入力可能
  - 翻訳実行ボタン
    - "翻訳する ↑" ボタン
    - クリックで翻訳開始

- **動作**
  1. 翻訳ボタンをクリック
  2. 翻訳IDを生成して保存
  3. `/nani/result?id=XXX` にリダイレクト

### `/nani/result?id=XXX` (翻訳結果ページ)

2カラムレイアウト（メインページと同じ構造）

#### 左サイドバー
- メインページと同じ翻訳履歴リスト
- 現在表示中の項目をハイライト表示

#### 右メインエリア
- **翻訳元テキスト表示**
  - 入力されたテキストを表示

- **翻訳結果表示エリア**
  - ストリーミングで翻訳結果を表示
  - 翻訳中は徐々にテキストが追加される
  - 翻訳完了後は全文表示

- **翻訳時間表示**
  - 翻訳完了後に所要時間を表示（秒数）

- **戻るリンク**
  - `/nani` に戻るためのリンク

## データ管理

### インメモリストア
- 翻訳履歴を保存
- 各翻訳には以下の情報を保持
  - `id`: ユニークな識別子
  - `text`: 翻訳元テキスト
  - `targetLang`: 翻訳先言語 ('ja' | 'en')
  - `result`: 翻訳結果（ストリーミング完了後に保存）
  - `createdAt`: 作成日時

## API エンドポイント

### `POST /api/translations`
- 新しい翻訳を作成
- リクエスト: `{ text: string, targetLang: 'ja' | 'en' }`
- レスポンス: `{ id: string }`

### `GET /api/translations`
- 全翻訳履歴を取得
- レスポンス: `{ translations: Translation[] }`

### `GET /api/translations/[id]/stream`
- 指定IDの翻訳をストリーミング実行
- ReadableStream でチャンク単位で翻訳結果を返す
- ストリーミング完了後、結果をストアに保存

## UI/UX

### レイアウト
- 左サイドバー: 固定幅（約300px）
- 右メインエリア: 可変幅（残りのスペース）
- レスポンシブ対応（将来対応）

### カラー・スタイル
- ブランドカラー: ブルー系（#3B82F6）
- 背景: ライトグレー/ホワイト
- アクセントカラー: 緑（アイコン用）

### アニメーション
- ストリーミング中のテキスト表示アニメーション
- ホバー時のインタラクション

## 技術スタック

- Next.js 15 (App Router)
- React Server Components / Client Components
- TypeScript
- Tailwind CSS
- Gemini API（翻訳エンジン）

## 制約・今後の拡張

### 現在の実装
- インメモリストア（サーバー再起動でデータ消失）
- ログイン機能なし
- 日本語⇄英語のみ対応

### 将来の拡張候補
- データベース連携（永続化）
- ユーザー認証
- 多言語対応
- 翻訳履歴の検索機能
- お気に入り機能
